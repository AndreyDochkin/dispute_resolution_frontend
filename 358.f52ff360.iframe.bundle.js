"use strict";(self.webpackChunkdispute_resolution=self.webpackChunkdispute_resolution||[]).push([[358],{"./src/components/ui-kit/CommentForm/CommentForm.jsx":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{Z:function(){return ui_kit_CommentForm_CommentForm}});var toConsumableArray=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/toConsumableArray.js"),objectSpread2=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/objectSpread2.js"),slicedToArray=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/slicedToArray.js"),react=__webpack_require__("./node_modules/react/index.js"),TextArea=__webpack_require__("./src/components/ui-kit/TextArea/TextArea.jsx"),Button=__webpack_require__("./src/components/ui-kit/Button/Button.jsx"),NewDisputeFileUpload=__webpack_require__("./src/components/ui-kit/NewDisputeFileUpload/NewDisputeFileUpload.jsx"),FilePreview=__webpack_require__("./src/components/ui-kit/FilePreview/FilePreview.jsx"),jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js");function CommentForm_CommentForm(_ref){var _user$last_name$,user=_ref.user,onSend=_ref.onSend,_useState=(0,react.useState)({content:"",file:[]}),_useState2=(0,slicedToArray.Z)(_useState,2),commentData=_useState2[0],setCommentData=_useState2[1],_useState3=(0,react.useState)([]),_useState4=(0,slicedToArray.Z)(_useState3,2),fileList=_useState4[0],setFileList=_useState4[1],_useState5=(0,react.useState)(!1),_useState6=(0,slicedToArray.Z)(_useState5,2),fileAdd=_useState6[0],setFileAdd=_useState6[1],_useState7=(0,react.useState)(10),_useState8=(0,slicedToArray.Z)(_useState7,2),freeSize=_useState8[0],setFreeSize=_useState8[1],handleDeleteFile=function handleDeleteFile(item){var updateFilesSize=freeSize+function formatBytes(bytes){if(!+bytes)return 0;var mb=Math.pow(1024,2);return parseFloat((bytes/mb).toFixed(2))}(item.size);setFreeSize(updateFilesSize);var updatedList=(0,toConsumableArray.Z)(fileList);updatedList.splice(fileList.indexOf(item),1),setFileList(updatedList)};return(0,jsx_runtime.jsxs)("div",{className:"comment",children:[(0,jsx_runtime.jsxs)("div",{className:"comment-form",children:[(0,jsx_runtime.jsx)("div",{className:"user-avatar ".concat("mediator"===user.role&&"user-avatar_mediator"),children:(0,jsx_runtime.jsx)("p",{className:"user-name",children:null!==(_user$last_name$=user.last_name[0])&&void 0!==_user$last_name$?_user$last_name$:""})}),(0,jsx_runtime.jsx)(TextArea.Z,{maxLength:1e3,minLength:25,placeholder:"Добавить комментарии не менее 25 символов и не более 1000",rows:1,error:"",value:commentData.content,handleChange:function handleCommentChange(evt){var value=evt.target.value;setCommentData((function(prev){return(0,objectSpread2.Z)((0,objectSpread2.Z)({},prev),{},{content:value})}))},children:(0,jsx_runtime.jsx)("button",{label:"","aria-label":"attache file",type:"button",onClick:function handleAddFile(){setFileAdd(!fileAdd)},className:"comment-pipe"})}),(0,jsx_runtime.jsx)(Button.Z,{size:"micro",label:"",color:"transperent",type:"button",before:"send",onClick:function handleSend(){onSend(commentData)},disabled:function checkValidSend(){return!(commentData.content.length>25&&commentData.content.length<=1e3)}()})]}),fileAdd?(0,jsx_runtime.jsxs)("div",{className:"file-conteiner",children:[(0,jsx_runtime.jsxs)("div",{className:"new-dispute-file new-dispute-form__item-wrapper",children:[(0,jsx_runtime.jsxs)("div",{className:"new-dispute-form__item-title-wrapper_large",children:[(0,jsx_runtime.jsx)("h3",{className:"new-dispute-form__item-title",children:"Прикрепите файлы"}),(0,jsx_runtime.jsx)("p",{className:"new-dispute-form__item-title new-dispute-form__item-title_subtext",children:"Допустимый формат файлов: JPG, PDF"})]}),(0,jsx_runtime.jsx)(NewDisputeFileUpload.z,{fileList:fileList,updateFileList:function updateFileList(updatedList){setFileList(updatedList),setCommentData((function(prev){return(0,objectSpread2.Z)((0,objectSpread2.Z)({},prev),{},{file:updatedList})}))},freeSize:freeSize,setFreeSize:setFreeSize})]}),(0,jsx_runtime.jsxs)("div",{className:"new-dispute-footer new-dispute-form__item-wrapper",children:[(0,jsx_runtime.jsx)("span",{}),(0,jsx_runtime.jsx)("div",{className:"new-dispute-footer__used-zone",children:(0,jsx_runtime.jsx)("div",{className:"file-preview",children:fileList.map((function(item,index){return(0,jsx_runtime.jsx)(FilePreview.s,{item:item,index:index,onDeleteFile:handleDeleteFile},"".concat(item.name,"_").concat(item.type))}))})})]})]}):null]})}CommentForm_CommentForm.defaultProps={user:{},onSend:function onSend(){}},CommentForm_CommentForm.__docgenInfo={description:"",methods:[],displayName:"CommentForm",props:{user:{defaultValue:{value:"{}",computed:!1},description:"",type:{name:"shape",value:{last_name:{name:"string",required:!1},role:{name:"string",required:!1}}},required:!1},onSend:{defaultValue:{value:"() => {}",computed:!1},description:"",type:{name:"func"},required:!1}}};var ui_kit_CommentForm_CommentForm=CommentForm_CommentForm},"./src/components/ui-kit/FilePreview/FilePreview.jsx":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{s:function(){return FilePreview_FilePreview}});__webpack_require__("./node_modules/react/index.js");var FileType_PDF=__webpack_require__("./src/Images/FileType-PDF.svg"),FileType_JPG=__webpack_require__("./src/Images/FileType-JPG.svg"),FileType_PNG=__webpack_require__("./src/Images/FileType-PNG.svg"),FileType_ZIP=__webpack_require__("./src/Images/FileType-ZIP.svg"),ImageConfig={pdf:FileType_PDF.Z,jpg:FileType_JPG.Z,jpeg:FileType_JPG.Z,png:FileType_PNG.Z,zip:FileType_ZIP.Z},jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js"),FilePreview_FilePreview=function FilePreview(_ref){var item=_ref.item,onDeleteFile=_ref.onDeleteFile,isEditDispute=_ref.isEditDispute,name=item.name,type=item.type,pureName=name.split(".").slice(0,-1).join("."),fileType=type.split("/").pop();return(0,jsx_runtime.jsxs)("div",{className:"drop-file-preview__item",children:[(0,jsx_runtime.jsxs)("div",{className:"drop-file-preview__img-wrapper",children:[!isEditDispute&&(0,jsx_runtime.jsx)("button",{className:"drop-file-preview__delete",type:"button","aria-label":"Кнопка удаления вложенного файла",onClick:function onClick(){return onDeleteFile(item)}}),(0,jsx_runtime.jsx)("img",{className:"drop-file-preview__img",src:ImageConfig[fileType],alt:"Превью по типу файла"})]}),(0,jsx_runtime.jsx)("p",{className:"drop-file-preview__name",children:pureName})]})};FilePreview_FilePreview.__docgenInfo={description:"",methods:[],displayName:"FilePreview",props:{item:{description:"",type:{name:"object"},required:!0},onDeleteFile:{description:"",type:{name:"func"},required:!0},isEditDispute:{description:"",type:{name:"bool"},required:!0}}}},"./src/components/ui-kit/NewDisputeFileUpload/NewDisputeFileUpload.jsx":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{z:function(){return NewDisputeFileUpload_NewDisputeFileUpload}});var toConsumableArray=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/toConsumableArray.js"),slicedToArray=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/slicedToArray.js"),react=__webpack_require__("./node_modules/react/index.js");var Logo_upload=__webpack_require__.p+"static/media/Logo_upload.56c72cb9ace47dd43a668c800ee42751.svg",variable_constants=__webpack_require__("./src/config/constants/variable.constants.js"),jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js"),NewDisputeFileUpload_NewDisputeFileUpload=function NewDisputeFileUpload(_ref){var fileList=_ref.fileList,updateFileList=_ref.updateFileList,freeSize=_ref.freeSize,setFreeSize=_ref.setFreeSize,_useState=(0,react.useState)(!1),_useState2=(0,slicedToArray.Z)(_useState,2),errorEx=_useState2[0],setErrorEx=_useState2[1],_useState3=(0,react.useState)(!1),_useState4=(0,slicedToArray.Z)(_useState3,2),isErrorSize=_useState4[0],setIsErrorSize=_useState4[1],_useState5=(0,react.useState)(0),_useState6=(0,slicedToArray.Z)(_useState5,2),isErrorQuantity=_useState6[0],setIsErrorQuantity=_useState6[1],handleUsedSize=function handleUsedSize(updatedList){var usedSpaceArr=[];if(0===updatedList.length)return 0;updatedList.forEach((function(item){usedSpaceArr.push(function formatBytes(bytes){if(!+bytes)return 0;var mb=Math.pow(1024,2);return parseFloat((bytes/mb).toFixed(2))}(item.size))}));var usedSpace=usedSpaceArr.reduce((function(res,item){return res+item}));return Math.round(100*(variable_constants.SY-usedSpace+Number.EPSILON))/100};return(0,jsx_runtime.jsxs)("div",{className:"new-dispute-file__drop-zone",children:[(0,jsx_runtime.jsx)("img",{className:"new-dispute-file__drop-zone-logo",src:Logo_upload,alt:""}),!errorEx&&(0,jsx_runtime.jsx)("p",{className:"new-dispute-file__drop-zone-text",children:"Перетащите файлы сюда или нажмите, чтобы загрузить"}),errorEx&&(0,jsx_runtime.jsx)("p",{className:"new-dispute-file__drop-zone-text new-dispute-file__drop-zone-error",children:"Файлы с недопустимым расширением и/или дубликаты удалены"}),isErrorQuantity>0&&(0,jsx_runtime.jsxs)("p",{className:"new-dispute-file__drop-zone-text new-dispute-file__drop-zone-error",children:["Превышено допустимое количество файлов на: ",isErrorQuantity]}),isErrorSize&&(0,jsx_runtime.jsx)("p",{className:"new-dispute-file__drop-zone-text new-dispute-file__drop-zone-error",children:"Файлы не добавлены. Превышен допустимы объем файлов. Максимум 10Мб"}),!isErrorSize&&(0,jsx_runtime.jsx)("p",{className:"new-dispute-file__drop-zone-text",children:"Осталось: ".concat(freeSize," MB")}),(0,jsx_runtime.jsx)("input",{className:"new-dispute-file__drop-zone-input ".concat(fileList.length>=variable_constants.YH?"cursor_default":""),type:"file",value:"",accept:"image/jpeg,application/pdf",multiple:!0,onChange:function handleFileDrop(evt){var newFile=Array.from(evt.target.files);if(newFile){var filterEx=[];newFile.forEach((function(item){"image/jpeg"===item.type||"application/pdf"===item.type?fileList.length>0&&fileList.find((function(file){return file.name===item.name}))?setErrorEx(!0):filterEx.push(item):setErrorEx(!0)}));var excessFiles=fileList.length+filterEx.length-variable_constants.YH;excessFiles>0&&(filterEx.splice(-excessFiles,excessFiles),setIsErrorQuantity(excessFiles));var updatedList=[].concat((0,toConsumableArray.Z)(fileList),filterEx),filesSpase=handleUsedSize(updatedList);filesSpase>=0?(setFreeSize(filesSpase),updateFileList(updatedList)):filesSpase<0&&setIsErrorSize(!0)}setTimeout((function(){setErrorEx(!1),setIsErrorSize(!1),setIsErrorQuantity(0)}),3e3)},disabled:fileList.length>=variable_constants.YH})]})};NewDisputeFileUpload_NewDisputeFileUpload.__docgenInfo={description:"",methods:[],displayName:"NewDisputeFileUpload",props:{fileList:{description:"",type:{name:"arrayOf",value:{name:"object"}},required:!0},updateFileList:{description:"",type:{name:"func"},required:!0},freeSize:{description:"",type:{name:"number"},required:!0},setFreeSize:{description:"",type:{name:"func"},required:!0}}}},"./src/components/ui-kit/TextArea/TextArea.jsx":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{Z:function(){return ui_kit_TextArea_TextArea}});var objectSpread2=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/objectSpread2.js"),objectWithoutProperties=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js"),react=__webpack_require__("./node_modules/react/index.js"),jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js"),_excluded=["name","label","placeholder","value","disabled","error","srartRows","handleChange","children"];function TextArea_TextArea(_ref){var name=_ref.name,label=_ref.label,placeholder=_ref.placeholder,value=_ref.value,disabled=_ref.disabled,error=_ref.error,srartRows=_ref.srartRows,handleChange=_ref.handleChange,children=_ref.children,props=(0,objectWithoutProperties.Z)(_ref,_excluded),textAreaRef=(0,react.useRef)(null);return(0,react.useEffect)((function resizeTextArea(){textAreaRef.current.style.height="62px",textAreaRef.current.style.height="".concat(textAreaRef.current.scrollHeight,"px")}),[value]),(0,jsx_runtime.jsxs)("div",{className:"textarea",children:[label&&(0,jsx_runtime.jsx)("label",{htmlFor:"textDescription",className:"textarea__label",children:label}),(0,jsx_runtime.jsxs)("div",{className:"textarea__box",children:[(0,jsx_runtime.jsx)("textarea",(0,objectSpread2.Z)((0,objectSpread2.Z)({className:"textarea__textarea",name:name,placeholder:placeholder,id:"textDescription",onChange:handleChange,disabled:disabled,ref:textAreaRef,value:value,rows:srartRows},props),{},{children:value||""})),children,error&&(0,jsx_runtime.jsx)("span",{className:"textarea__error",children:error})]})]})}TextArea_TextArea.__docgenInfo={description:"",methods:[],displayName:"TextArea",props:{name:{defaultValue:{value:"''",computed:!1},description:"",type:{name:"string"},required:!1},label:{defaultValue:{value:"''",computed:!1},description:"",type:{name:"string"},required:!1},placeholder:{defaultValue:{value:"''",computed:!1},description:"",type:{name:"string"},required:!1},value:{defaultValue:{value:"undefined",computed:!0},description:"",type:{name:"string"},required:!1},disabled:{defaultValue:{value:"false",computed:!1},description:"",type:{name:"bool"},required:!1},error:{defaultValue:{value:"'zzzzzzzz'",computed:!1},description:"",type:{name:"string"},required:!1},srartRows:{defaultValue:{value:"2",computed:!1},description:"",type:{name:"number"},required:!1},handleChange:{defaultValue:{value:"() => {}",computed:!1},description:"",type:{name:"func"},required:!1},children:{defaultValue:{value:"undefined",computed:!0},description:"",type:{name:"node"},required:!1}}};var ui_kit_TextArea_TextArea=TextArea_TextArea;TextArea_TextArea.defaultProps={name:"",label:"",placeholder:"",value:void 0,disabled:!1,error:"zzzzzzzz",srartRows:2,handleChange:function handleChange(){},children:void 0}},"./src/config/constants/variable.constants.js":function(__unused_webpack_module,__webpack_exports__,__webpack_require__){__webpack_require__.d(__webpack_exports__,{L_:function(){return PASSWORD_TEMPLATE},SY:function(){return MAX_FILES_SIZE},YH:function(){return MAX_QUANTITY_FILES},y7:function(){return REG_TEXT}});var MAX_QUANTITY_FILES=4,MAX_FILES_SIZE=10,PASSWORD_TEMPLATE='[0-9a-zA-Z!@#$%:;*".,-<>?_+=&^~\\{\\}\\[\\]\\(\\)\\/\\|]{8,32}',REG_TEXT=/^[а-яА-Яa-zA-Z0-9\s.,!?;-@#$%^&*()"']+$/}}]);